## git是什么
- git是目前世界上最先进的 **分布式版本控制系统**
- git是linux花了两周写出来的

## github（git哈不）
- github可以提供存储，存储你的代码
- 所以很多开源的项目都放在GitHub

## git的两大特点
- 能够进行 **版本控制**
  - 可以解决多人开发问题
  - 把多人开发的代码融合起来
  - 可以解决历史版本的问题
    - 为了防止自己又想改回以前的版本，用git就会很方便
- 分布式
  - 分布式和集中式的区别
    - 就算中央服务器挂掉了，依然可以在自己的电脑里写程序
    - 集中式就不行了，因为本地没有存储

## git基本操作
- 安装和基本配置
  - 安装
    - sudo apt-get install git
    - git 如果出现一堆命令就说明装着的
- 管理代码
  - 先建立目录 mkdir git_test
  - cd进去，创建版本库
    - git init 出现.git目录
  - 写代码，hello.py写完之后创建版本
    - git add hello.py
    - git commit -m '版本名称——自定义'
  - 查看版本信息
    - git log
    - commit 后面的是序列号
  - 版本回退
    - git reset --hard HEAD^ //回退到上一个版本，上上个就俩尖括号，也可以用HEAD-100表示前100个版本
    - git reset --hard 版本号

## 工作区和暂存区
- 我们的文件夹就是工作区
- get add就是把工作区的修改提交到暂存区
- get commit就是把暂存区的内容提交到版本库
- git status可以看有木有修改，状态变化
- 只会修改提交到暂存区的内容，只是在工作区修改没有提交的部分是不修改的

## 撤销修改
- git checkout -- 文件名 尚未提交的时候撤销修改的命令
- git reset HEAD 文件名 撤销提交到暂存区里面的内容的命令
- 如果提交到里版本库，就只能版本回退了

## 对比文件的不同
- 对比工作区和某个版本文件的不同
  - git diff HEAD -- 文件名
  - "-"代表HEAD版本中的文件,"+"表示工作区中的内容
- 对比两个版本之间某个文件的不同
  - git diff HEAD HEAD^ -- 文件名 "-"a是前面的,"-"b是后面的

## 删除文件
- 都是对工作区的改动
- 如果你删除了文件，但是没有提交到版本库，你可以回退的
- 你要是确实想要删除的话，就要提交了
  - git add 文件名
  - 或者git rm 文件名 都可以
- 提交之后还想回来
  - 取消暂存，和前面一样的
- 然后提交版本库git commit

## 漂亮的显示log信息
- git log -- pretty=oneline (简短的形式显示)
- git relog 查看操作记录

## git分支
- git把我们之前提交的版本都串成一条时间线，这条时间线就是一个分支，截止到目前为止，只有一条时间线，这个分支叫做主分支，即master分支
- HEAD严格来说不是指向提交，而是指向master，master才是指向提交的，所以HEAD指向的就是当前分支
- git创建一个分支很快，因为除了增加一个dev指针，改变HEAD的指向，工作区的文件没有任何变化
- 如果dev上的工作完成了，可以把dev合并到master上面，git合并的方法也很简单，就是直接把master指向dev当前的提交
  - 合并完成之后，可以直接把dev指针删掉，删掉之后就只剩下master分支了

## 查看当前有几个分支以及在哪个分支下工作
- git branch
- 如何创建并切换到新的分支
  - git checkout -b dev
- 切换回来  `git checkout master`，直接拿回来指到master分支
- 合并内容 `git merge dev` 把dev的修改内容合并进来
  - 这是快速合并`Fast-forward`，就是把指针一挪，有时候是不能用的
- 删除分支`git branch -d dev`

## 解决冲突
- 合并之前，把HEAD又指回了master分支，然后在master分支上又进行了修改
- 这时候合并就会报错，合并冲突
  - 也就是在两个轴上面修改了同一个文件
- 合并冲突之后，再打开文件，文件里面会把起冲突的地方标示出来
- 手动解决冲突之后再提交
- git log --graph就可以看到起冲突的实际情况

## 分支管理策略
- 快速合并不能成功但是又没有冲突，这个时候会在合并后做一次新的提交，但是这种时候删除分支后，会丢掉新的分支信息
  - recurstive
- 两个分支都有修改，但是不是修改同一个文件，这个情况不能快速合并但是不冲突
- 此时会弹窗，让我们输入提交的说明信息
- 禁止快速合并`git merge --no-ff -m '提示信息' dev`
  - 快速合并不会有提交信息

## bug分支
- git提供了一个stash功能,可以把当前工作现场保存起来，等以后恢复现场后继续工作
- 保存工作现场`git stash`
- 查看保存的工作现场`git stash list`
- 切换回保存的工作现场`git stash pop`
- 流程
  - 保存现场
  - 修复bug时先创建新的bug分支进行修复
  - 合并到master
  - 删除bug分支
  - 回到dev
  - 恢复现场
  - 继续工作

## GitHub的使用
- 新建github账户
- 创建仓库
  - new repository
    - 会有.gitignore和readme.md文件
  - add.gitignore 文件，忽略管理的文件，选择好语言后会自动生成
    - 也可以自己去修改，修改完了之后可以点击commit changes进行提交
- 添加ssh账户
  - 找到二维码一样的东西，有个settings
  - ssh and gpg keys
    - 写好名字，把电脑的公钥拿来就可以了
  - 如何生成.ssh公钥
    - 回到主目录下，编辑.gitconfig
    - ```
    [user]
      email = 注册邮箱
      name = GitHub的用户名
    ```
    - 生成ssh公钥
      - `ssh-keygen -t rsa -C "邮箱地址"` rsa是生成密钥的方式
    - 生成的在家目录下的.ssh文件夹里面
      - 有三个文件：id_rsa id_rsa.pub known_hosts
      - 查看第二个的内容，复制到github里面去

## 克隆项目
- 选一个代码，然后点击clone or download
  - 有两种协议：ssh 和 https
  - 选择ssh，复制地址
  - 到电脑上的目录执行`git clone 地址`
  - 就完成了
- 克隆出错，去看ipad截图

## 推送代码
- 本地提交之后
- 提交到远程`git push origin 分支名称`

## 将本地的分支去跟踪远程的分支
- `git branch --set-upstream-to=origin/远程分支名称 本地分支名称`
- 一旦跟踪了，你提交的时候就不需要写后面的分支名称了

## 从远程分支上拉取代码
- `git pull origin 分支名称`

## 工作中使用git
- 项目经理
  - 搭建框架
  - 把项目框架代码放到服务器
- 普通员工
  - 在自己的电脑上生成ssh公钥，然后把公钥给项目经理，项目经理把它添加到服务器上面
  - 项目经理会给每个员工项目代码的地址，组员把代码下载到自己的电脑上
  - 创建本地的分支dev，在dev上进行每天的开发
  - 每一个员工开发完成自己的代码之后，需要将代码发布远程的dev分支上
- master:用于保存发布项目的代码
- dev：保存开发过程中的代码，不是说每天都往上推，推送过程项目经理来控制的
